@model DemoQRCode.Models.QRCodeModel

@{
    ViewData["Title"] = "Generate QR Code";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">@ViewData["Title"]</h2>

    <form asp-action="Index" method="post" class="needs-validation" novalidate>
        <!-- QR Code Type -->
        <div class="mb-3">
            <label for="QRCodeType" class="form-label">QR Code Type:</label>
            <select id="QRCodeType" name="QRCodeType" asp-for="QRCodeType" class="form-select">
                <option value="1">SMS</option>
                <option value="2">WhatsApp</option>
                <option value="3">Email</option>
                <option value="4">URL</option>
                <option value="5">WiFi</option>
                <option value="6">Text</option>
                <option value="7">Contact Information (VCard)</option>
            </select>
        </div>

        <!-- Dynamic Fields -->

        <!-- SMS -->
        <div id="div1" class="hideDiv">
            <div class="mb-3">
                <label asp-for="PhoneNumber" class="form-label">Phone Number:</label>
                <input asp-for="PhoneNumber" class="form-control" placeholder="Enter phone number" />
            </div>
            <div class="mb-3">
                <label asp-for="MessageSMS" class="form-label">Message:</label>
                <textarea asp-for="MessageSMS" class="form-control" rows="3" placeholder="Enter your message"></textarea>
            </div>
        </div>

        <!-- WhatsApp -->
        <div id="div2" class="hideDiv">
            <div class="mb-3">
                <label asp-for="WhatsAppNumber" class="form-label">WhatsApp Number:</label>
                <input asp-for="WhatsAppNumber" class="form-control" placeholder="Enter WhatsApp number" />
            </div>
            <div class="mb-3">
                <label asp-for="WhatsAppMessage" class="form-label">WhatsApp Message:</label>
                <textarea asp-for="WhatsAppMessage" class="form-control" rows="3" placeholder="Enter your message"></textarea>
            </div>
        </div>

        <!-- Email -->
        <div id="div3" class="hideDiv">
            <div class="mb-3">
                <label asp-for="ReceiveEmailAddress" class="form-label">Recipient Email Address:</label>
                <input asp-for="ReceiveEmailAddress" class="form-control" placeholder="Enter recipient email address" />
            </div>
            <div class="mb-3">
                <label asp-for="EmailSubject" class="form-label">Subject:</label>
                <input asp-for="EmailSubject" class="form-control" placeholder="Enter email subject" />
            </div>
            <div class="mb-3">
                <label asp-for="EmailMessage" class="form-label">Message:</label>
                <textarea asp-for="EmailMessage" class="form-control" rows="3" placeholder="Enter your message"></textarea>
            </div>
        </div>

        <!-- URL -->
        <div id="div4" class="hideDiv">
            <div class="mb-3">
                <label asp-for="Url" class="form-label">URL:</label>
                <input asp-for="Url" class="form-control" placeholder="Enter URL" />
            </div>
        </div>

        <!-- WiFi -->
        <div id="div5" class="hideDiv">
            <div class="mb-3">
                <label asp-for="WifiSSID" class="form-label">WiFi SSID:</label>
                <input asp-for="WifiSSID" class="form-control" placeholder="Enter WiFi SSID" />
            </div>
            <div class="mb-3">
                <label asp-for="WifiPassword" class="form-label">WiFi Password:</label>
                <input asp-for="WifiPassword" class="form-control" placeholder="Enter WiFi password" />
            </div>
        </div>

        <!-- Text -->
        <div id="div6" class="hideDiv">
            <div class="mb-3">
                <label asp-for="Message" class="form-label">Text Content:</label>
                <textarea asp-for="Message" class="form-control" rows="3" placeholder="Enter your text"></textarea>
            </div>
        </div>

        <!-- Contact Information (VCard) -->
        <div id="div7" class="hideDiv">
            <div class="mb-3">
                <label asp-for="ContactFirstName" class="form-label">First Name:</label>
                <input asp-for="ContactFirstName" class="form-control" placeholder="Enter first name" />
            </div>
            <div class="mb-3">
                <label asp-for="ContactLastName" class="form-label">Last Name:</label>
                <input asp-for="ContactLastName" class="form-control" placeholder="Enter last name" />
            </div>
            <div class="mb-3">
                <label asp-for="ContactPhone" class="form-label">Phone Number:</label>
                <input asp-for="ContactPhone" class="form-control" placeholder="Enter phone number" />
            </div>
            <div class="mb-3">
                <label asp-for="ContactEmail" class="form-label">Email:</label>
                <input asp-for="ContactEmail" class="form-control" placeholder="Enter email" />
            </div>
            <div class="mb-3">
                <label asp-for="ContactCompany" class="form-label">Company:</label>
                <input asp-for="ContactCompany" class="form-control" placeholder="Enter company name" />
            </div>
            <div class="mb-3">
                <label asp-for="ContactAddress" class="form-label">Address:</label>
                <input asp-for="ContactAddress" class="form-control" placeholder="Enter address" />
            </div>
        </div>

        <!-- Submit Button -->
        <div class="mb-3">
            <button type="submit" class="btn btn-primary w-100">Generate QR Code</button>
            <button type="reset" id="btn-reset" class="btn-dark w-100">Reset</button>
        </div>

        <!-- QR Code Display -->
        <div class="mt-5 text-center w-100 h-100">
            @if (!string.IsNullOrEmpty(Model.QRImageUrl))
            {
                <h3>Generated QR Code:</h3>
                <img src="@Model.QRImageUrl" alt="QR Code" class="img-fluid border rounded" style="width: 150px; height: 150px;" />
            }
        </div>
    </form>

    @section Scripts
    {
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const qrCodeTypeSelect = document.getElementById("QRCodeType");
                const hideDivs = document.querySelectorAll(".hideDiv");

                // Show/hide fields based on selected QR code type
                function toggleDivs() {
                    const selectedValue = qrCodeTypeSelect.value;
                    hideDivs.forEach(div => div.style.display = "none");
                    const targetDiv = document.getElementById(`div${selectedValue}`);
                    if (targetDiv) {
                        targetDiv.style.display = "block";
                    }
                }

                qrCodeTypeSelect.addEventListener("change", toggleDivs);

                toggleDivs();
            });
        </script>
    }
</div>